<html>
<head>
  <title>强制类型转换-Number</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600475 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="680"/>
<h1>强制类型转换-Number</h1>

<div>
<span><div><b>ToNumber</b></div><div><br/></div><div>检查该值是否有valueof()方法，若有则使用该值进行强制类型转换;否则使用toString()的返回值进行转换。<br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>var a = {</div><div><span>    </span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">valueOf</span>(){</div><div><span>   <span>    </span> </span>return 12</div><div><span>    </span>}</div><div>}</div><div>var b = {</div><div><span>    </span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">toString</span>(){</div><div><span>    <span>    </span></span>return '1'</div><div><span>    </span>}</div><div>}</div><div>console.log(Number(a)) // 12</div><div>console.log(Number(b)) // 1</div><div>Number(&quot;&quot;) // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">0</span></div><div>Number([]) // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">0</span></div><div>Number([&quot;abc&quot;]) // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">NaN</span></div><div>Number(&quot;abc&quot;)  // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">NaN</span></div></div><div><br/></div><div><b>ToBoolean</b></div><div><b><br/></b></div><div>除了假值以外的都为真值，假值列表为：<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">undefined, null, false, +0/-0/NaN，&quot;&quot;</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>// 封装对象都为true</div><div>new String(&quot;&quot;) // true</div><div>new Number(0) // true</div><div>new Boolean(false) // true</div><div><br/></div><div>var a = &quot;false&quot; // true</div><div>var b = &quot;0&quot; // true</div><div>var c = &quot;''&quot; // true</div><div>var d = [] // true</div></div><div><br/></div><div>转换为数字</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>var c = &quot;3.14&quot;</div><div>var b = 5 + <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">+c</span>;</div><div><br/></div><div>var d = new Date()</div><div>var s = <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">+d</span>; // 1548490977690</div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">// ~x大致等于 -(x+1)</span></div><div>~42 == -43</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">var str = &quot;hello word</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">str.indexOf(&quot;lo&quot;) != -1 等同于 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">~str.indexOf</span>(&quot;lo&quot;) </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">// 字位截取</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Math.floor( - 49.6) ; // 50</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">~~</span>(-49.6); // -49</span></div></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">parseInt(...)只适用于<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">字符串</span>， 从左到右解析，如果遇到非字符串就停止</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>parseInt(&quot;123abc&quot;)  // 123</div><div>Number(&quot;123abc&quot;)  // NaN</div></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">parseInt(...) 若遇到<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">非字符串</span>，则会<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">先将其转换为字符串</span>，再进行解析。</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>parseInt(0.00008); // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">0</span> -&gt; &quot;0&quot;来自于&quot;0.00008&quot;</div><div>parseInt(0.0000008); // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">8</span> -&gt; &quot;8&quot;来自于&quot;8e-7&quot;</div><div>parseInt(false, 16); // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">250</span> -&gt; &quot;fa&quot; 来自于 &quot;false&quot;</div><div>parseInt(parseInt, 16); // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">15</span> -&gt; &quot;f&quot; 来自于 &quot;function...&quot;</div><div>parseInt(&quot;0x10&quot;) // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">16</span></div><div>parseInt(&quot;103&quot;, 2) // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">2</span></div></div><div><br/></div><div><b>在if(...)中建议使用Boolean(a) 和 !!a 来进行显示强制类型转换。</b></div><div><b><br/></b></div><div><b>如果+的其中一个操作数是字符串，则执行字符串拼接； 否则执行数字加法。</b></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>var a = 2 + '3'  // &quot;23&quot;</div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">// <b>-</b>是数字减法运算符</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">var b = [3] - [2]; <span>    </span>// 1</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">var c = [3] + [2];   // &quot;32&quot;</span></div></div><div><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">a + &quot;&quot; </b>会先调用a的<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">valueOf</span>()方法，再调用<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">toString</span>()</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>var a = {</div><div>valueOf: function(){return 42},</div><div>toString: function(){return 4}</div><div>}</div><div>a + &quot;&quot; ; // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">42</span></div><div>String(a); // <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">4</span></div></div><div><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></b></div><div><b><br/></b></div></span>
</div></body></html> 