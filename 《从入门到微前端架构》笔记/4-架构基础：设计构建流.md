构建系统的核心用途是：帮助开发者从源代码开始，构建出最后可用的目标软件。
开发人员还能通过构建系统中的构建工具添加更多实用的功能，如修改监测代码自动编译和刷新浏览器，在构建系统时配置不同的环境参数，在本地运行的时候做反向代理。
构建系统主要是做以下事情：
* 依赖管理及安装
* 优化开发环境
* 代码质量检测
* 编译及打包
* 测试及部署
### 依赖管理工具
### 软件包原管理
软件包源有以下几种方式：
* 公有/私有软件包源服务器
* 基于源码版本管理服务器，比如使用Git服务器来管理版本
* 本地的软件包，使用相对路径导入本地仓库
公有/私有软件包源服务器有以下几种方式：
* npmjs.org提供的官方源
* 淘宝的cnpm源
* 搭建私有的NPM服务器,提供更为安全快速的Node.js环境
搭建NPM私服除了放置那些不适合公开的库，它还可以保证应用的构建不受外部的干扰————比如外部软件包中心宕机。对于那些因为安全原因隔离内部/外部网络的公司来说，则更需要这样的软件包仓库。
1. 基于源码版本管理服务器
在依赖package.json中安装对应的版本：
```
"dependencied": {
    "adr": "git+http://github.com/phodal/adr/#v1.0.7
}
```
2. 本地的软件依赖包
把应用的依赖放置在本地，在package.json中通过"aofe":"file:aofe"的形式一如依赖。
其应用场景如下：
* 构建的包过大，不适合使用Git下载
* 在开发应用的同时开发依赖。
3. 前端应用的编译
4. JavaScript的编译：ES6->ES5,TS->ES
5. CSS的编译
6. CSS in JavaScript：CSS在JavaScript代码中。
CSS in JavaScript是组件化架构不断发展的产物，它可以解决CSS全局作用域的问题。
传统的CSS加载方式是，将所有的样式写在CSS文件里；而CSS in JavaScript则是通过JavaScript将CSS样式附加到元素上。
7. 模板编译
### 前端代码的打包
在主流的前端框架里，编译及打包都交给了对应框架的CLI(Command-Line Interface,命令行界面)。
构建出来的代码涉及到下面几个目标文件：
* 用于管理运行时（如路由懒加载）的runtime.js文件
* 样式相关的style.css
* 解决JavaScript在不同浏览器兼容问题的polyfills.js
* 程序相关逻辑的main.js
### 设计构建流
构建流通常来源于：
* 过去的开发经验
* 前端框架提供的命令
* 应用脚手架提供的功能
1. 如何设计构建流
了解以下内容：
* 我们要做的任务有哪些？
* 每个任务具体的步骤拆解有哪些?
* 部署时，其对应的形式是怎样的?
* 有没有现成的插件可使用？
2. 构建工具：自动化任务
现在基本上以下面三种形式存在：
* NPM脚本，适用于脚本简单的应用构建
* Gulp/Grunt，适用于复杂的项目工作流构建
* webpack, 进行项目的模块打包
3. 使用包管理工具构建NPM
可以通过NPM脚本来执行构建工作，这些脚本存在于package.json中的scripts部分中。当脚本越来越长时，可以使用JSON文件来管理任务。
4. 使用构建工具构建Grunt/Gulp
5. 使用打包工具构建webpack
6. 插件定义构建流
开发有时需要一些额外的静态资源，比如当我们使用的图标源自图标字体(Icon Fonts)时，每次都需要通过SVG重新生成。此时我们就需要在构建脚本里编写一些相应的代码来实现这个功能。
可以尝试通过以下方式来解决问题：
* (1) 查找是否有对应的插件
* (2) 对比不同的插件区别
* (3) 创建插件的适配层
* (4) 验证插件是否有效
* (5) 重复(2)~(4)步
* (6) 如果插件都不适用，那么就编写新插件或改写原有的插件
在具体的编译任务中处理相应的编译工作，我们还要做的事情有：
* 确认源文件类型、输出文件内容及格式
* 根据源文件输出查找相应的插件
* 编写对应的配置或者代码
7. 框架定义构建流
### 持续交付问题
1. 部署方式
从方式上可以分为如下三种：
* 持续部署：构建完成即部署，常见于测试环境
* 自动化部署：在持续部署的基础上稍微弱化，即需要人为的介入才能自动化部署
* 手动部署：全程需要人为操作的部署流程
2. 设计持续集成
这种模式有以下优点：
* 拥有一个随时可发布的应用软件
* 方便测试人员进行测试
* 及时地展示项目的代码集成情况
前端项目的持续集成的主要内容如下：
* 对应用进行构建
* 进行应用的测试，利用代码来完成测试有助于减少Bug
* 部署应用到对应的环境，以提供一个联调和测试环境
我们需要做的事情有：
* (1) 找到相应的工具
* (2) 进行相应的配置
* (3) 运行文章中完成的构架脚本
* (4) 编写部署脚本
3. 自动化部署
4. 环境配置
不同的环境拥有不同的功能、代码及配置事项，需要针对不同的环境（开发、线上）编写构建脚本。
5. 开发环境配置
开发配置有如下不同环境的考虑因素：
* 在本地环境开发时，需要将HTTP请求指向本地的Mock Server
* 在本地集成后端服务时，需要将HTTP请求直接指向开发环境的后台服务
* 针对不同环境的构建来配置不同的构建脚本，以用于部署或者调试
* 在运行时，针对不同环境的产品进行相关服务的配置
需要考虑如下配置：
* 构建配置
* 代码配置：代码中的配置主要用于运行时的环境配置，比如用于不同环境（开发、测试、线上）的第三方服务配置，以及广告、第三方登录授权服务配置等。这些配置可以硬编码在项目中，也可以动态地从后台获取。
* 代理配置
6. 线上调试
为了捕获难以察觉的bug，有时需要在对应的环境（如线上环境）上运行代码。
为了在线上运行和调试代码，通常需要一些额外的"开关"（toogle),,如：
* 在URL中添加一些参数，前端代码在运行的过程中去读取这个参数
* 在LocalStorage中根据某些值是否存在来运行和调试代码
* 对特定的账号进行权限处理，以获取调试功能
功能开关是一种强大的技术，允许团队在不更改代码的情况下修改系统行为。比如：我们想在月底的上线中添加一个重要的A功能。但是A功能不太稳定，我们想在发布过程中控制A功能的使用。这个时候，我们就需要使用功能开关来控制，当我们打开A功能的时候，就运行带有A功能的部分的代码；当我们关闭A功能开关的时候，就运行原始的代码。在代码中，我们通过某一个变量来控制，而变量的管理则可以通过上述的方式来实现。